"use strict";angular.module("nzAppApp",["ngCookies","ngResource","ngSanitize","ngRoute","google-maps"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/map",{templateUrl:"views/map.html",controller:"MapCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("nzAppApp").controller("MainCtrl",["$scope",function(a){a.daysToGo=function(){var a=864e5,b=new Date,c=new Date(b.getFullYear(),7,1);return Math.ceil((c.getTime()-b.getTime())/a)}}]),angular.module("nzAppApp").controller("MapCtrl",["$scope","Place",function(a,b){a.map={center:{latitude:-42,longitude:174},zoom:6,events:{click:function(b,c,d){var e=d[0],f={latitude:e.latLng.lat(),longitude:e.latLng.lng()};a.$apply(function(){a.editFormModel=f})}}},a.gPlace,a.places=b.query(),a.editFormModel={},a.centerMapOn=function(b){a.map.center=b.geometry},a.editPlace=function(b){a.editFormModel=angular.copy(b)},a.deletePlace=function(b){for(var c=0;c<a.places.length;c++)if(a.places[c].objectId==b.objectId)return a.places.splice(c,1),void b.$delete()},a.update=function(b){if(b.objectId){for(var c=0;c<a.places.length;c++)if(a.places[c].objectId==b.objectId)return a.places[c]=angular.copy(b),void a.places[c].$update()}else{var d=angular.copy(b);d.addedBy=a.person,d.$save(),a.places.push(d)}a.reset()},a.reset=function(){a.editFormModel=new b}}]),angular.module("nzAppApp").controller("AppCtrl",["$scope",function(a){a.person="Guest",a.login=function(b){var c=prompt("What school did you go to? (Hint: Three letters all capitals)","");"RGS"==c?a.person=b:alert("Wrong!")}}]),angular.module("nzAppApp").directive("googleautoplace",["Place",function(a){return{require:"ngModel",link:function(b,c,d,e){var f={types:[],componentRestrictions:{country:"nz"}};b.gPlace=new google.maps.places.Autocomplete(c[0],f),google.maps.event.addListener(b.gPlace,"place_changed",function(){var d=b.gPlace.getPlace(),f=new a({name:d.name,website:d.website,review:d.review_summary,types:d.types,notes:""});d.geometry&&(f.latitude=d.geometry.location.lat(),f.longitude=d.geometry.location.lng()),b.$apply(function(){e.$setViewValue(c.val()),b.editFormModel=f})})}}}]),angular.module("nzAppApp").factory("Place",["$resource",function(a){return a("https://api.parse.com/1/classes/Place/:placeId",{placeId:"@objectId"},{get:{method:"GET",headers:{"X-Parse-Application-Id":"1pxxeTsHpgtnuhrrRxqBW7Z13wll1dJsi6hUXt0c","X-Parse-REST-API-Key":"DB2rSuICaB3Wr8okAeA9HNpi6AwdIH25PKzHg0JK"}},save:{method:"POST",headers:{"X-Parse-Application-Id":"1pxxeTsHpgtnuhrrRxqBW7Z13wll1dJsi6hUXt0c","X-Parse-REST-API-Key":"DB2rSuICaB3Wr8okAeA9HNpi6AwdIH25PKzHg0JK"}},update:{method:"PUT",headers:{"X-Parse-Application-Id":"1pxxeTsHpgtnuhrrRxqBW7Z13wll1dJsi6hUXt0c","X-Parse-REST-API-Key":"DB2rSuICaB3Wr8okAeA9HNpi6AwdIH25PKzHg0JK"}},query:{method:"GET",isArray:!0,headers:{"X-Parse-Application-Id":"1pxxeTsHpgtnuhrrRxqBW7Z13wll1dJsi6hUXt0c","X-Parse-REST-API-Key":"DB2rSuICaB3Wr8okAeA9HNpi6AwdIH25PKzHg0JK"},transformResponse:function(a){return angular.fromJson(a).results}},remove:{method:"DELETE",headers:{"X-Parse-Application-Id":"1pxxeTsHpgtnuhrrRxqBW7Z13wll1dJsi6hUXt0c","X-Parse-REST-API-Key":"DB2rSuICaB3Wr8okAeA9HNpi6AwdIH25PKzHg0JK"}},"delete":{method:"DELETE",headers:{"X-Parse-Application-Id":"1pxxeTsHpgtnuhrrRxqBW7Z13wll1dJsi6hUXt0c","X-Parse-REST-API-Key":"DB2rSuICaB3Wr8okAeA9HNpi6AwdIH25PKzHg0JK"}}})}]);